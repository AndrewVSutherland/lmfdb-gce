Gunicorn Options/Tuning

http://docs.gunicorn.org/en/latest/design.html
Generally we recommend (2 x $num_cores) + 1 as the number of workers to start off with.
Some examples of behavior requiring asynchronous workers:
        Applications making long blocking calls (Ie, external web services)
        Serving requests directly to the internet
        …

http://docs.gunicorn.org/en/latest/faq.html
Increase ulimit:
/etc/security/limits.conf:
*               soft    nofile          65535
*               hard    nofile          65535

Increase the maximum socket backlog:
/etc/sysctl.conf:
net.core.somaxconn = 2048

To increase the worker count by one:
$ kill -TTIN $masterpid
(-TTOU to decrease)

http://docs.gunicorn.org/en/latest/run.html
-w WORKERS
-k WORKERCLASS - The type of worker process to run. You’ll definitely want to read the production page for the implications of this parameter. You can set this to $(NAME) where $(NAME) is one of sync, eventlet, gevent, or tornado, gthread, gaiohttp. sync is the default.
Not running proxy/nginx, use async: “If you want to deploy Gunicorn to handle unbuffered requests 
(i.e., serving requests directly from the internet) you should use one of the async workers.”


Port 80
1) authbind 
authbind python httpserver test works fine;
authbind sage gunicorn doesn't work…

2) netfilter
iptables -t nat -A PREROUTING -i eth0 -p tcp --dport 80 -j REDIRECT --to-port 8080

iptables-save > /etc/iptables/rules.v4

apt install iptables-persistent
(will load /etc/iptables/rules.v4 on boot)




